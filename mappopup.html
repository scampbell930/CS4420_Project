<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<title>Display a popup on hover</title>
	<meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
	<link href="https://api.mapbox.com/mapbox-gl-js/v2.6.0/mapbox-gl.css" rel="stylesheet">
	<script src="https://api.mapbox.com/mapbox-gl-js/v2.6.0/mapbox-gl.js"></script>
	<style>
		body {
			margin: 0;
			padding: 0;
		}

		#map {
			position: absolute;
			top: 0;
			bottom: 0;
			width: 100%;
		}
	</style>
</head>

<body>
	<style>
		.mapboxgl-popup {
			max-width: 400px;
			font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
		}
	</style>
	<div id="map"></div>
	<script>
		mapboxgl.accessToken = 'pk.eyJ1Ijoic2NhbXBiZWxsOCIsImEiOiJja3VoMnYwejIxNWZkMm5waDQ0dDlib212In0.Jj7xo4k-Cp31dsj9-F7DAg';
		const map = new mapboxgl.Map({
			container: 'map',
			center: [-104.800644, 38.846127],
			style: 'mapbox://styles/scampbell8/ckuh31bae0l7v18pe2a4z0id1',
			zoom: 10
		});
		map.on('load', () => {

			map.addSource('places', {
				'type': 'geojson',
				'data': {
					"type": "FeatureCollection",
					"features": [
						{
							"type": "Feature",
							"geometry": {
								"type": "Point",
								"coordinates": [-104.93167, 38.85616, 2010.0]
							},
							"properties": {
								"name": "The Incline Trail",
								"miles": 4.0,
								"desc": "Generated by AllTrails https://www.alltrails.com/"
							}
						},
						{
							"type": "Feature",
							"geometry": {
								"type": "Point",
								"coordinates": [-104.88642, 38.94905, 2166.0]
							},
							"properties": {
								"name": "Blodgett Peak",
								"miles": 3.5,
								"desc": "Generated by AllTrails https://www.alltrails.com/"
							}
						},
						{
							"type": "Feature",
							"geometry": {
								"type": "Point",
								"coordinates": [-104.88611, 38.94886, 2163.0]
							},
							"properties": {
								"name": "Blodgett Peak Open Space Connector Loop",
								"miles": 1.8,
								"desc": "Generated by AllTrails https://www.alltrails.com/"
							}
						},
						{
							"type": "Feature",
							"geometry": {
								"type": "Point",
								"coordinates": [-104.888, 38.94913, 2182.0]
							},
							"properties": {
								"name": "Blodgett Peak Open Space Loop",
								"miles": 1.3,
								"desc": "Generated by AllTrails https://www.alltrails.com/"
							}
						},
						{
							"type": "Feature",
							"geometry": {
								"type": "Point",
								"coordinates": [-104.88547, 38.94741, 2162.0]
							},
							"properties": {
								"name": "Front Range Ridge via Douglas Fir Trail",
								"miles": 4.8,
								"desc": "Generated by AllTrails https://www.alltrails.com/"
							}
						},
						{
							"type": "Feature",
							"geometry": {
								"type": "Point",
								"coordinates": [-104.8731, 38.84862, 1874.0]
							},
							"properties": {
								"name": "Hodgeback Valley and Codell Loop",
								"miles": 1.7,
								"desc": "Generated by AllTrails https://www.alltrails.com/"
							}
						},
						{
							"type": "Feature",
							"geometry": {
								"type": "Point",
								"coordinates": [-104.88711, 38.79186, 2082.0]
							},
							"properties": {
								"name": "Mount Cutler Trail",
								"miles": 1.7,
								"desc": "Generated by AllTrails https://www.alltrails.com/"
							}
						},
						{
							"type": "Point",
							"geometry": {
								"type": "Point",
								"coordinates": [-104.88659, 38.79175, 2087.0]
							},
							"properties": {
								"name": "Mount Muscoco Trail",
								"miles": 4.0,
								"desc": "Generated by AllTrails https://www.alltrails.com/"
							}
						},
						{
							"type": "Feature",
							"geometry": {
								"type": "Point",
								"coordinates": [-104.93102, 38.95031, 2847.0]
							},
							"properties": {
								"name": "Ormes Peak East Face",
								"miles": 0.5,
								"desc": "Generated by AllTrails https://www.alltrails.com/"
							}
						},
						{
							"type": "Feature",
							"geometry": {
								"type": "Point",
								"coordinates": [-104.93407, 38.94534, 2868.0]
							},
							"properties": {
								"name": "Ormes Peak Trail",
								"miles": 0.9,
								"desc": "Generated by AllTrails https://www.alltrails.com/"
							}
						},
						{
							"type": "Feature",
							"geometry": {
								"type": "Point",
								"coordinates": [-104.88057, 38.8817, 1979.0]
							},
							"properties": {
								"name": "Palmer, Buckskin-Charley, Niobrara, and Bretag Trail Loop",
								"miles": 4.0,
								"desc": "Generated by AllTrails https://www.alltrails.com/"
							}
						},
						{
							"type": "Feature",
							"geometry": {
								"type": "Point",
								"coordinates": [-104.88036, 38.88106, 1978.0]
							},
							"properties": {
								"name": "Palmer, Cabin Canyon, Strausenbach, and Central Gardens Trail Loop",
								"miles": 4.0,
								"desc": "Generated by AllTrails https://www.alltrails.com/"
							}
						},
						{
							"type": "Feature",
							"geometry": {
								"type": "Point",
								"coordinates": [-104.89079, 38.82182, 2028.0]
							},
							"properties": {
								"name": "Palmer Trail (Section 16)",
								"miles": 5.7,
								"desc": "Generated by AllTrails https://www.alltrails.com/"
							}
						},
						{
							"type": "Feature",
							"geometry": {
								"type": "Point",
								"coordinates": [-104.88026, 38.88104, 1978.0]
							},
							"properties": {
								"name": "Perkins Central Garden Trail",
								"miles": 1.1,
								"desc": "Generated by AllTrails https://www.alltrails.com/"
							}
						},
						{
							"type": "Feature",
							"geometry": {
								"type": "Point",
								"coordinates": [-104.87832, 38.85177, 1886.0]
							},
							"properties": {
								"name": "Quarry via Red Rock Canyon Trail",
								"miles": 0.6,
								"desc": "Generated by AllTrails https://www.alltrails.com/"
							}
						},
						{
							"type": "Feature",
							"geometry": {
								"type": "Point",
								"coordinates": [-104.87817, 38.85187, 1886.0]
							},
							"properties": {
								"name": "Red Rock Rim Trail to Palmer Trail To Greenlee Trail",
								"miles": 5.4,
								"desc": "Generated by AllTrails https://www.alltrails.com/"
							}
						},
						{
							"type": "Feature",
							"geometry": {
								"type": "Point",
								"coordinates": [-104.88616, 38.94895, 2164.0]
							},
							"properties": {
								"name": "Red Squirrel Trail to Douglas Fir Trail",
								"miles": 3.9,
								"desc": "Generated by AllTrails https://www.alltrails.com/"
							}
						},
						{
							"type": "Feature",
							"geometry": {
								"type": "Point",
								"coordinates": [-104.87925, 38.85331, 1888.0]
							},
							"properties": {
								"name": "Sand Canyon, Mesa, Greenlee, Red Rock Canyon Loop",
								"miles": 5.4,
								"desc": "Generated by AllTrails https://www.alltrails.com/"
							}
						},
						{
							"type": "Feature",
							"geometry": {
								"type": "Point",
								"coordinates": [-104.90399, 38.79068, 2296.0]
							},
							"properties": {
								"name": "Seven Bridges Trail",
								"miles": 3.5,
								"desc": "Generated by AllTrails https://www.alltrails.com/"
							}
						},
						{
							"type": "Feature",
							"geometry": {
								"type": "Point",
								"coordinates": [-104.90395, 38.79059, 2294.0]
							},
							"properties": {
								"name": "St. Mary's Falls Trail",
								"miles": 5.9,
								"desc": "Generated by AllTrails https://www.alltrails.com/"
							}
						},
						{
							"type": "Feature",
							"geometry": {
								"type": "Point",
								"coordinates": [-104.86627, 38.84603, 1856.0]
							},
							"properties": {
								"name": "Captain Jacks & Big Bikes OHV Route",
								"miles": 35.6,
								"desc": "Generated by AllTrails https://www.alltrails.com/"
							}
						},
						{
							"type": "Feature",
							"geometry": {
								"type": "Point",
								"coordinates": [-104.87976, 38.85304, 1888.0]
							},
							"properties": {
								"name": "Greenlee and Mesa Loop to Off Leash Dog Area",
								"miles": 2.9,
								"desc": "Generated by AllTrails https://www.alltrails.com/"
							}
						},
						{
							"type": "Feature",
							"geometry": {
								"type": "Point",
								"coordinates": [-104.85709, 38.92498, 1999.0]
							},
							"properties": {
								"name": "High Arches Trail and Ute Valley Regional Park Trail Loop",
								"miles": 1.5,
								"desc": "Generated by AllTrails https://www.alltrails.com/"
							}
						},
						{
							"type": "Feature",
							"geometry": {
								"type": "Point",
								"coordinates": [-104.90348, 38.84262, 2026.0]
							},
							"properties": {
								"name": "Intemann Trail",
								"miles": 3.8,
								"desc": "Generated by AllTrails https://www.alltrails.com/"
							}
						},
						{
							"type": "Feature",
							"geometry": {
								"type": "Point",
								"coordinates": [-104.87977, 38.85338, 1887.0]
							},
							"properties": {
								"name": "Mesa, Greenlee and Red Rock Canyon Path Loop",
								"miles": 1.8,
								"desc": "Generated by AllTrails https://www.alltrails.com/"
							}
						},
						{
							"type": "Feature",
							"geometry": {
								"type": "Point",
								"coordinates": [-104.8835, 38.87623, 1970.0]
							},
							"properties": {
								"name": "Palmer Trail to Siamese Twins",
								"miles": 1.5,
								"desc": "Generated by AllTrails https://www.alltrails.com/"
							}
						},
						{
							"type": "Feature",
							"geometry": {
								"type": "Point",
								"coordinates": [-104.89651, 38.86584, 1931.0]
							},
							"properties": {
								"name": "Rampart Range Road",
								"miles": 22.1,
								"desc": "Generated by AllTrails https://www.alltrails.com/"
							}
						},
						{
							"type": "Feature",
							"geometry": {
								"type": "Point",
								"coordinates": [-104.87931, 38.85326, 1888.0]
							},
							"properties": {
								"name": "Sand Canyon, Mesa, Greenlee, Red Rock Canyon Loop",
								"miles": 5.4,
								"desc": "Generated by AllTrails https://www.alltrails.com/"
							}
						},
						{
							"type": "Feature",
							"geometry": {
								"type": "Point",
								"coordinates": [-104.88494, 38.87218, 1939.0]
							},
							"properties": {
								"name": "Scotsman Trail Loop",
								"miles": 1.0,
								"desc": "Generated by AllTrails https://www.alltrails.com/"
							}
						},
						{
							"type": "Feature",
							"geometry": {
								"type": "Point",
								"coordinates": [-104.89038, 38.86806, 1928.0]
							},
							"properties": {
								"name": "Siamese Twins Loop Trail",
								"miles": 0.5,
								"desc": "Generated by AllTrails https://www.alltrails.com/"
							}
						},
						{
							"type": "Feature",
							"geometry": {
								"type": "Point",
								"coordinates": [-104.89881, 38.98932, 2273.0]
							},
							"properties": {
								"name": "Stanley Canyon Trail to Stanley Reservoir",
								"miles": 4.1,
								"desc": "Generated by AllTrails https://www.alltrails.com/"
							}
						},
						{
							"type": "Feature",
							"geometry": {
								"type": "Point",
								"coordinates": [-104.88654, 38.9911, 2192.0]
							},
							"properties": {
								"name": "Stanley Canyon Trail",
								"miles": 5.8,
								"desc": "Generated by AllTrails https://www.alltrails.com/"
							}
						},
						{
							"type": "Feature",
							"geometry": {
								"type": "Point",
								"coordinates": [-104.88051, 38.88123, 1977.0]
							},
							"properties": {
								"name": "Susan G. Bertag Trail and Palmer Trail Loop",
								"miles": 2.5,
								"desc": "Generated by AllTrails https://www.alltrails.com/"
							}
						},
						{
							"type": "Feature",
							"geometry": {
								"type": "Point",
								"coordinates": [-104.88236, 38.87528, 1971.0]
							},
							"properties": {
								"name": "Upper Loop Trail",
								"miles": 0.4,
								"desc": "Generated by AllTrails https://www.alltrails.com/"
							}
						},
						{
							"type": "Feature",
							"geometry": {
								"type": "Point",
								"coordinates": [-104.86511, 38.97494, 2045.0]
							},
							"properties": {
								"name": "USAFA Stairs",
								"miles": 0.3,
								"desc": "Generated by AllTrails https://www.alltrails.com/"
							}
						},
						{
							"type": "Feature",
							"geometry": {
								"type": "Point",
								"coordinates": [-104.87814, 38.86984, 1954.0]
							},
							"properties": {
								"name": "Ute Trail",
								"miles": 1.1,
								"desc": "Generated by AllTrails https://www.alltrails.com/"
							}
						},
						{
							"type": "Feature",
							"geometry": {
								"type": "Point",
								"coordinates": [-104.85676, 38.9249, 2000.0]
							},
							"properties": {
								"name": "Ute Valley Park Loop Trail",
								"miles": 3.8,
								"desc": "Generated by AllTrails https://www.alltrails.com/"
							}
						},
						{
							"type": "Feature",
							"geometry": {
								"type": "Point",
								"coordinates": [-104.85711, 38.92494, 1999.0]
							},
							"properties": {
								"name": "Ute Valley Park Trail",
								"miles": 2.3,
								"desc": "Generated by AllTrails https://www.alltrails.com/"
							}
						},
						{
							"type": "Feature",
							"geometry": {
								"type": "Point",
								"coordinates": [-104.89821, 38.98854, 2268.0]
							},
							"properties": {
								"name": "West Monument Creek Loop Trail [PRIVATE PROPERTY]",
								"miles": 9.6,
								"desc": "Generated by AllTrails https://www.alltrails.com/"
							}
						},
						{
							"type": "Feature",
							"geometry": {
								"type": "Point",
								"coordinates": [-104.90104, 38.97268, 2188.0]
							},
							"properties": {
								"name": "West Monument Creek Trail 713 to Northfield Reservoir",
								"miles": 5.6,
								"desc": "Generated by AllTrails https://www.alltrails.com/"
							}
						}
					]
				}

			});
			// Add a layer showing the places.
			map.addLayer({
				'id': 'places',
				'type': 'circle',
				'source': 'places',
				'paint': {
					'circle-color': '#4264fb',
					'circle-radius': 4,
					'circle-stroke-width': 2,
					'circle-stroke-color': '#ffffff'
				}
			});

			// Create a popup, but don't add it to the map yet.
			const popup = new mapboxgl.Popup({
				closeButton: false,
				closeOnClick: false
			});

			map.on('mouseenter', 'places', (e) => {
				// Change the cursor style as a UI indicator.
				map.getCanvas().style.cursor = 'pointer';

				// Copy coordinates array.
				const coordinates = e.features[0].geometry.coordinates.slice();
				const description = e.features[0].properties.name + ": " + e.features[0].properties.miles + " miles";

				// Ensure that if the map is zoomed out such that multiple
				// copies of the feature are visible, the popup appears
				// over the copy being pointed to.
				while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {
					coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;
				}

				// Populate the popup and set its coordinates
				// based on the feature found.
				popup.setLngLat(coordinates).setHTML(description).addTo(map);
			});

			map.on('mouseleave', 'places', () => {
				map.getCanvas().style.cursor = '';
				popup.remove();
			});
		});
	</script>

</body>

</html>